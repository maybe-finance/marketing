<div data-controller="stocks-allocator" data-index="<%= local_assigns[:index] %>" class="flex items-center gap-2 <%= local_assigns[:index] == 0 ? "" : "hidden" %>">
  <%= render partial: "shared/search_select", locals: { 
    list: local_assigns[:list], 
    label: local_assigns[:label],
    name: "stock_#{local_assigns[:index]}"
  } %>
  
  <div class="relative w-16">
    <input type="number" min="0" max="100" step="1" name="stock_allocation_<%= local_assigns[:index] %>" data-stocks-allocator-target="allocation" data-action="input->stocks-allocator#updateAllocation" class="form-field w-[68px] text-left rounded-[10px] h-9 shadow-xs text-sm !appearance-none" placeholder="0">
    <span class="absolute inset-y-0 right-2 flex items-center pointer-events-none text-gray-500 text-xs">%</span>
  </div>

  <div class="flex flex-col items-center justify-between gap-1">
    <button type="button" data-action="click->stocks-allocator#removeStockSelector" class="flex justify-center p-[2px] items-center w-[16px] h-[16px] bg-white border border-black/10 rounded-[7px] text-gray-500 shadow-xs">
      <%= lucide_icon("minus", class: "stroke-[3px]") %>
    </button>
    <button type="button" data-action="click->stocks-allocator#addStockSelector" class="flex justify-center p-[2px] items-center w-[16px] h-[16px] bg-white border border-black/10 rounded-[7px] text-gray-500 shadow-xs">
      <%= lucide_icon("plus", class: "stroke-[3px]") %>
    </button>
  </div>
</div>